(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/app_admin/goods-attr-info/goods-attr-info"],{"1bc6":function(t,r,e){"use strict";e.r(r);var a=e("b5a4"),o=e.n(a);for(var i in a)"default"!==i&&function(t){e.d(r,t,function(){return a[t]})}(i);r["default"]=o.a},7523:function(t,r,e){"use strict";var a=e("9608"),o=e.n(a);o.a},9608:function(t,r,e){},b5a4:function(t,r,e){"use strict";(function(t){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=e("2f62");function o(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),e.push.apply(e,a)}return e}function i(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?o(e,!0).forEach(function(r){s(t,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):o(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}return t}function s(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var n={data:function(){return{iphone_x:!1,attr_groups:[],attr_list:[],unit:"件",attr:[],select:!1,chooseAttr:{},chooseGroup:{},chooseList:[],selectList:[],selectStatus:!1,chooseIndex:-1,listLength:0,showGroup:!1,showSetting:!1,inputName:!1,inputStock:!1,inputNo:!1,inputWeight:!1,startIndex:-10,endIndex:90,setting:{price:"",stock:"",no:"",weight:""},groupIndex:-1}},computed:i({},(0,a.mapState)({theme:function(t){return t.mallConfig.theme}})),methods:{settingValue:function(t,r){"price"==r?this.setting.price=t.detail.value:"stock"==r?this.setting.stock=t.detail.value:"no"==r?this.setting.no=t.detail.value:"weight"==r&&(this.setting.weight=t.detail.value)},nameBlur:function(t,r){r?(this.inputName=!1,this.attr[t].price=this.money(r.detail.value)):(this.inputName=!0,this.inputStock=!1,this.inputNo=!1,this.inputWeight=!1,this.chooseIndex=t)},stockBlur:function(t,r){r?(this.inputStock=!1,this.attr[t].stock=r.detail.value):(this.inputStock=!0,this.inputName=!1,this.inputNo=!1,this.inputWeight=!1,this.chooseIndex=t)},noBlur:function(t,r){r?(this.inputNo=!1,this.attr[t].no=r.detail.value):(this.inputNo=!0,this.inputName=!1,this.inputStock=!1,this.inputWeight=!1,this.chooseIndex=t)},weightBlur:function(t,r){r?(this.inputWeight=!1,this.attr[t].weight=r.detail.value):(this.inputWeight=!0,this.inputName=!1,this.inputStock=!1,this.inputNo=!1,this.chooseIndex=t)},money:function(t){var r=t.toString();return 0==r.indexOf(".")&&(r="0"+r),r=r.replace(/[^\d.]/g,""),r=r.replace(/\.{2,}/g,"."),r=r.replace(".","$#$").replace(/\./g,"").replace("$#$","."),r=r.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),r.indexOf(".")<0&&""!=r&&(r=parseFloat(r)),r},allSetting:function(){var r=!1;for(var e in this.attr)this.attr[e].select&&(r=!0);r?this.showSetting=!0:t.showToast({title:"请选择规格",icon:"none",duration:1e3})},settingSubmit:function(t){var r=this;for(var e in r.attr)r.attr[e].select&&(r.setting.price&&(r.attr[e].price=r.money(r.setting.price),r.$forceUpdate()),r.setting.stock&&(r.attr[e].stock=r.setting.stock,r.$forceUpdate()),r.setting.no&&(r.attr[e].no=r.setting.no,r.$forceUpdate()),r.setting.weight&&(r.attr[e].weight=r.setting.weight,r.$forceUpdate()));r.close()},close:function(){this.showSetting=!1,this.setting.stock="",this.setting.price="",this.setting.no="",this.setting.weight=""},unSelect:function(t,r){var e=this;e.attr[r].select=!e.attr[r].select;var a=!0;for(var o in this.attr)this.attr[o].select||(a=!1);e.selectStatus=a,e.$forceUpdate()},allSelect:function(){var t=this;for(var r in t.selectStatus=!t.selectStatus,t.attr)t.attr[r].select=!t.selectStatus,t.attr[r].show==t.listLength&&(t.attr[r].select=t.selectStatus)},save:function(){var r=this,e=!0;for(var a in r.attr)if(!r.attr[a].price||!r.attr[a].stock)return e=!1,t.showToast({title:"请填写规格信息",icon:"none",duration:1e3}),!1;e&&(t.showLoading({title:"保存中..."}),t.setStorage({key:"temp_attr_info",data:r.attr,success:function(r){t.hideLoading(),setTimeout(function(){t.navigateBack()},500)},fail:function(r){t.hideLoading(),t.showToast({title:r.errMsg,icon:"none",duration:1e3})}}))},choose:function(t,r){this.chooseGroup=t,this.groupIndex!=r?(this.showGroup=!0,this.groupIndex=r):this.showGroup=!this.showGroup},confirm:function(r,e){var a=this;for(var o in a.showGroup=!1,a.attr_groups[a.groupIndex].attr_list)a.attr_groups[a.groupIndex].attr_list[o].choose=!1;for(var i in r>-1?(a.chooseAttr=e,e.attr_groups_id=a.attr_groups[a.groupIndex].attr_groups_id,a.attr_groups[a.groupIndex].attr_list[r].choose=!0,a.attr_groups[a.groupIndex].choose=!0,a.attr_groups[a.groupIndex].choose_attr=a.attr_groups[a.groupIndex].attr_list[r].attr_name):(a.chooseGroup={},a.chooseAttr={},a.attr_groups[a.groupIndex].choose=!1,a.attr_groups[a.groupIndex].choose_attr=""),a.chooseList=[],a.attr_groups)if(a.attr_groups[i].choose)for(var s in a.attr_groups[i].attr_list)if(a.attr_groups[i].attr_list[s].choose){var n={attr_group_id:a.attr_groups[i].attr_group_id,attr_group_name:a.attr_groups[i].attr_group_name,attr_id:a.attr_groups[i].attr_list[s].attr_id,attr_name:a.attr_groups[i].attr_list[s].attr_name};a.chooseList.push(n)}a.listLength=a.chooseList.length;var u=!1,c=-1;for(var p in a.attr)if(a.attr[p].show=0,a.attr[p].choose=[],a.attr[p].showIndex=-200,a.chooseList.length>0)for(var g in a.attr[p].attr_list)for(var h in a.chooseList)a.attr[p].attr_list[g].attr_group_id==a.chooseList[h].attr_group_id&&a.attr[p].attr_list[g].attr_id==a.chooseList[h].attr_id&&(a.attr[p].choose.push(a.chooseList[h].attr_name),console.log(a.attr[p].choose),a.attr[p].choose=Array.from(new Set(a.attr[p].choose)),a.attr[p].show=a.attr[p].choose.length,a.attr[p].showIndex=c,u=!0,a.$forceUpdate());else a.attr[p].showIndex=p;if(u)for(var _ in a.attr)a.attr[_].show==a.listLength&&(c++,a.attr[_].showIndex=c);else for(var l in a.attr)a.attr[l].choose=[],a.attr[l].show=a.attr[l].choose.length;a.startIndex=-10,a.endIndex=90,t.pageScrollTo({scrollTop:0,duration:300})},saveData:function(t,r,e,a,o){var i=this,s={attr_list:[],stock:"",price:"",no:"",weight:"",pic_url:"",shareLevelList:[],member_price:{}};s.attr_list.push(t),r&&s.attr_list.push(r),e&&s.attr_list.push(e),a&&s.attr_list.push(a),o&&s.attr_list.push(o),i.attr.push(s),i.$hideLoading()}},onPageScroll:function(t){var r=this;console.log(t.scrollTop),r.startIndex=Math.floor((t.scrollTop-50)/250)-150,r.endIndex=r.startIndex+300},onLoad:function(r){var e=this;e.$showLoading({type:"global",text:"加载中..."}),t.getStorage({key:"goods_unit",success:function(t){e.unit=t.data}}),t.getStorage({key:"temp_attr_info",success:function(r){for(var a in t.getStorage({key:"temp_attr",success:function(t){e.attr_groups=t.data}}),e.attr_list[0]=[],e.attr=r.data,e.attr)e.attr[a].show=0,e.attr[a].choose=[],e.attr[a].id=a,e.attr[a].select=!1,e.attr[a].showIndex=a;e.$hideLoading()},fail:function(r){t.getStorage({key:"temp_attr",success:function(t){e.attr_groups=t.data,e.attr=[];for(var r=0;r<e.attr_groups[0].attr_list.length;r++){var a={attr_group_id:e.attr_groups[0].attr_group_id,attr_group_name:e.attr_groups[0].attr_group_name,attr_id:e.attr_groups[0].attr_list[r].attr_id,attr_name:e.attr_groups[0].attr_list[r].attr_name};if(1==e.attr_groups.length)e.saveData(a);else for(var o=0;o<e.attr_groups[1].attr_list.length;o++){var i={attr_group_id:e.attr_groups[1].attr_group_id,attr_group_name:e.attr_groups[1].attr_group_name,attr_id:e.attr_groups[1].attr_list[o].attr_id,attr_name:e.attr_groups[1].attr_list[o].attr_name};if(2==e.attr_groups.length)e.saveData(a,i);else for(var s=0;s<e.attr_groups[2].attr_list.length;s++){var n={attr_group_id:e.attr_groups[2].attr_group_id,attr_group_name:e.attr_groups[2].attr_group_name,attr_id:e.attr_groups[2].attr_list[s].attr_id,attr_name:e.attr_groups[2].attr_list[s].attr_name};if(3==e.attr_groups.length)e.saveData(a,i,n);else for(var u=0;u<e.attr_groups[3].attr_list.length;u++){var c={attr_group_id:e.attr_groups[3].attr_group_id,attr_group_name:e.attr_groups[3].attr_group_name,attr_id:e.attr_groups[3].attr_list[u].attr_id,attr_name:e.attr_groups[3].attr_list[u].attr_name};if(4==e.attr_groups.length)e.saveData(a,i,n,c),e.$hideLoading();else for(var p=0;p<e.attr_groups[4].attr_list.length;p++){var g={attr_group_id:e.attr_groups[4].attr_group_id,attr_group_name:e.attr_groups[4].attr_group_name,attr_id:e.attr_groups[4].attr_list[p].attr_id,attr_name:e.attr_groups[4].attr_list[p].attr_name};e.saveData(a,i,n,c,g)}}}}}for(var h in e.attr)e.attr[h].show=0,e.attr[h].choose=[],e.attr[h].id=h,e.attr[h].showIndex=h}})}}),t.getSystemInfo({success:function(t){(t.model.indexOf("iPhone X")>-1||t.model.indexOf("iPhone 11")>-1||t.model.indexOf("iPhone11")>-1||t.model.indexOf("iPhone12")>-1||t.model.indexOf("Unknown Device")>-1)&&(e.iphone_x=!0)}})}};r.default=n}).call(this,e("543d")["default"])},c898:function(t,r,e){"use strict";e.r(r);var a=e("dd0f"),o=e("1bc6");for(var i in o)"default"!==i&&function(t){e.d(r,t,function(){return o[t]})}(i);e("7523");var s=e("2877"),n=Object(s["a"])(o["default"],a["a"],a["b"],!1,null,"0064fc96",null);r["default"]=n.exports},dd0f:function(t,r,e){"use strict";var a=function(){var t=this,r=t.$createElement;t._self._c},o=[];e.d(r,"a",function(){return a}),e.d(r,"b",function(){return o})}},[["814d","common/runtime","common/vendor"]]]);