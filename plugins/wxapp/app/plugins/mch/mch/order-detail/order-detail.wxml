<app-layout vue-id="1" class="data-v-14ba537a" bind:__l="__l" vue-slots="{{['default']}}"><image class="head-img data-v-14ba537a" src="{{mchImg.detail_bg}}"></image><block wx:if="{{status==2}}"><view class="head-txt main-between data-v-14ba537a"><view class="status-txt data-v-14ba537a">{{order.status_text}}</view></view></block><block wx:else><view class="head-txt main-between data-v-14ba537a"><block wx:if="{{order.is_sale==1}}"><view class="status-txt data-v-14ba537a">已完成</view></block><block wx:else><block wx:if="{{order.cancel_status==2}}"><view class="status-txt data-v-14ba537a">取消订单 待处理</view></block><block wx:else><block wx:if="{{order.is_pay==0&&order.pay_type!=2}}"><view class="status-txt data-v-14ba537a">等待买家付款</view></block><block wx:else><block wx:if="{{order.is_send==0}}"><view class="status-txt data-v-14ba537a">等待卖家发货</view></block><block wx:else><block wx:if="{{order.is_confirm==0}}"><view class="status-txt data-v-14ba537a">卖家已发货</view></block><block wx:else><block wx:if="{{order.is_confirm==1}}"><view class="status-txt data-v-14ba537a">买家已收货</view></block></block></block></block></block></block><block wx:if="{{order.auto_confirm>0&&order.is_send==1&&order.is_confirm==0}}"><view class="data-v-14ba537a">剩余<block wx:if="{{dd>0}}"><text class="data-v-14ba537a">{{dd+"天"}}</text></block><block wx:if="{{hh>0&&dd==0}}"><text class="data-v-14ba537a">{{hh+"小时"}}</text></block>{{''+mm+'分自动确认收货'}}</view></block><block wx:else><block wx:if="{{order.auto_cancel>0&&order.is_pay==0&&order.pay_type!=2}}"><view class="data-v-14ba537a">剩余<block wx:if="{{dd>0}}"><text class="data-v-14ba537a">{{dd+"天"}}</text></block><block wx:if="{{hh>0&&dd==0}}"><text class="data-v-14ba537a">{{hh+"小时"}}</text></block>{{''+mm+'分自动删除'}}</view></block><block wx:else><block wx:if="{{order.auto_sales>0&&order.is_sale==0&&order.is_confirm==1}}"><view class="data-v-14ba537a">剩余<block wx:if="{{dd>0}}"><text class="data-v-14ba537a">{{dd+"天"}}</text></block><block wx:if="{{hh>0&&dd==0}}"><text class="data-v-14ba537a">{{hh+"小时"}}</text></block>{{''+mm+'分自动完成订单'}}</view></block></block></block></view></block><view class="user-info data-v-14ba537a"><image class="localhost-img data-v-14ba537a" src="./../../image/localhost.png"></image><view class="user-text data-v-14ba537a"><text class="name data-v-14ba537a">{{status==1?order.name:order.order.name}}</text><text class="data-v-14ba537a">{{status==1?order.mobile:order.order.mobile}}</text></view><view class="user-text address-info data-v-14ba537a">{{status==1?order.address:order.order.address}}</view><view class="main-center area data-v-14ba537a"><view data-event-opts="{{[['tap',[['toCall',['$0'],['order']]]]]}}" class="detail-btn data-v-14ba537a" bindtap="__e">联系收货人</view><view class="line data-v-14ba537a"></view><view data-event-opts="{{[['tap',[['copy',['$event']]]]]}}" class="detail-btn data-v-14ba537a" bindtap="__e">复制地址</view></view></view><block wx:if="{{detail.express}}"><view class="express data-v-14ba537a"><image class="logo data-v-14ba537a" src="./../../image/express.png"></image><view class="express-company data-v-14ba537a">{{detail.express}}</view><view class="express-number data-v-14ba537a">{{"运单编号："+detail.express_no}}</view></view></block><block wx:else><block wx:if="{{order.express}}"><view class="express data-v-14ba537a"><image class="logo data-v-14ba537a" src="./../../image/express.png"></image><view class="express-company data-v-14ba537a">{{order.express}}</view><block wx:if="{{order.express}}"><view class="express-number data-v-14ba537a">{{"运单编号："+order.express_no}}</view></block></view></block></block><view class="goods-info data-v-14ba537a"><view class="goods-title data-v-14ba537a">自营商品</view><block wx:for="{{order.detail}}" wx:for-item="goods" wx:for-index="__i0__" wx:key="id"><view class="goods data-v-14ba537a"><image class="goods-img data-v-14ba537a" src="{{goods.goods_info.pic_url}}"></image><view class="t-omit-two goods-name data-v-14ba537a">{{goods.goods_info.name}}</view><view class="goods-attr data-v-14ba537a"><block wx:for="{{goods.goods_info.attr_list}}" wx:for-item="attr" wx:for-index="__i1__" wx:key="attr_id"><text class="data-v-14ba537a">{{attr.attr_group_name+":"+attr.attr_name}}</text></block></view><view class="goods-num data-v-14ba537a">{{"x"+goods.num}}</view><view class="goods-price data-v-14ba537a">{{"￥"+goods.total_original_price}}</view></view></block><block wx:if="{{status==1}}"><view class="data-v-14ba537a"><view class="main-between price-item data-v-14ba537a"><view class="price-label data-v-14ba537a">商品总价</view><view class="data-v-14ba537a">{{"￥"+order.total_goods_price+"元"}}</view></view><view class="main-between price-item data-v-14ba537a"><view class="price-label data-v-14ba537a">运费</view><view class="data-v-14ba537a">{{"￥"+order.express_price+"元"}}</view></view><block wx:if="{{order.member_discount_price>0}}"><view class="main-between price-item data-v-14ba537a"><view class="price-label data-v-14ba537a">会员折扣</view><view class="data-v-14ba537a">{{"￥"+order.member_discount_price+"元"}}</view></view></block><block wx:if="{{order.integral_deduction_price>0}}"><view class="main-between price-item data-v-14ba537a"><view class="price-label data-v-14ba537a">积分抵扣</view><view class="data-v-14ba537a">{{"￥-"+order.integral_deduction_price+"元"}}</view></view></block><block wx:if="{{order.coupon_discount_price>0}}"><view class="main-between price-item data-v-14ba537a"><view class="price-label data-v-14ba537a">优惠券抵扣</view><view class="data-v-14ba537a">{{"￥-"+order.coupon_discount_price+"元"}}</view></view></block><view class="main-between price-item data-v-14ba537a" style="margin-bottom:0;"><view class="price-label total-label data-v-14ba537a">订单总价</view><view class="total-price data-v-14ba537a">{{"￥"+order.total_pay_price+"元"}}</view></view></view></block><block wx:if="{{status==2}}"><view class="data-v-14ba537a"><view class="main-between price-item data-v-14ba537a"><view class="price-label data-v-14ba537a">商品总价</view><view class="data-v-14ba537a">{{"￥"+order.detail[0].total_price+"元"}}</view></view><view class="main-between price-item data-v-14ba537a" style="margin-bottom:0;"><view class="price-label total-label data-v-14ba537a">退货金额</view><view class="total-price data-v-14ba537a">{{"￥"+order.detail[0].unit_price+"元"}}</view></view></view></block></view><view class="goods-info mch-goods data-v-14ba537a"><view class="goods-title data-v-14ba537a">订单信息</view><view class="dir-left-nowrap price-item data-v-14ba537a"><view class="price-label data-v-14ba537a">{{(status==1?'下单时间':'申请时间')+":"}}</view><view class="data-v-14ba537a">{{order.created_at}}</view></view><view class="dir-left-nowrap price-item data-v-14ba537a"><view class="price-label data-v-14ba537a">订单号:</view><view class="data-v-14ba537a">{{order.order_no}}</view></view><block wx:if="{{order.words}}"><view class="dir-left-nowrap price-item data-v-14ba537a"><view class="price-label data-v-14ba537a">卖家备注:</view><view class="data-v-14ba537a">{{order.words}}</view></view></block><block wx:if="{{order.remark}}"><view class="dir-left-nowrap price-item data-v-14ba537a"><view class="price-label data-v-14ba537a">买家备注:</view><view class="data-v-14ba537a">{{order.remark}}</view></view></block><block wx:if="{{status==1}}"><view class="dir-left-nowrap price-item data-v-14ba537a"><view class="price-label data-v-14ba537a">支付方式:</view><block wx:if="{{order.pay_type==1}}"><view class="data-v-14ba537a">线上支付</view></block><block wx:else><block wx:if="{{order.pay_type==3}}"><view class="data-v-14ba537a">余额支付</view></block><block wx:else><block wx:if="{{order.pay_type==2}}"><view class="data-v-14ba537a">货到付款</view></block><block wx:else><view class="data-v-14ba537a">未支付</view></block></block></block></view></block><block wx:if="{{status==1}}"><view class="dir-left-nowrap price-item data-v-14ba537a"><view class="price-label data-v-14ba537a">收货方式:</view><block wx:if="{{order.send_type==1}}"><view class="data-v-14ba537a">到店自提</view></block><block wx:if="{{order.send_type==0}}"><view class="data-v-14ba537a">快递配送</view></block></view></block><block wx:for="{{order.order_form}}" wx:for-item="item" wx:for-index="__i2__" wx:key="*this"><block wx:if="{{order.order_form!='[]'}}"><view class="dir-left-nowrap price-item data-v-14ba537a"><view class="price-label data-v-14ba537a">{{item.label+":"}}</view><block wx:if="{{item.key=='img_upload'}}"><view class="data-v-14ba537a"><image class="form-img data-v-14ba537a" src="{{item.value}}" data-event-opts="{{[['tap',[['look',['$0'],[[['order.order_form','',__i2__,'value']]]]]]]}}" bindtap="__e"></image></view></block><block wx:else><view class="data-v-14ba537a">{{item.value}}</view></block></view></block></block></view><view class="{{['data-v-14ba537a','bottom-place',''+(iphone_x?'iphone_x':'')]}}"></view><block wx:if="{{order.is_sale!=1||status==2}}"><view class="{{['data-v-14ba537a','dir-right-nowrap','btn',''+(iphone_x?'iphone_x':'')]}}"><block wx:if="{{order.cancel_status==2}}"><view data-event-opts="{{[['tap',[['toAgreeCancel',['$0'],['order']]]]]}}" class="handle-btn other data-v-14ba537a" bindtap="__e">同意</view></block><block wx:if="{{order.cancel_status==2}}"><view data-event-opts="{{[['tap',[['beNotRefund',['$0'],['order']]]]]}}" class="handle-btn data-v-14ba537a" bindtap="__e">拒绝</view></block><block wx:if="{{order.cancel_status==0&&order.is_pay==0&&order.is_send==0}}"><view data-event-opts="{{[['tap',[['toChange',['$0'],['order']]]]]}}" class="handle-btn other data-v-14ba537a" bindtap="__e">修改价格</view></block><block wx:if="{{order.cancel_status==0&&order.is_send==0&&order.is_pay==1}}"><view data-event-opts="{{[['tap',[['toSend',['$0'],['order']]]]]}}" class="handle-btn other data-v-14ba537a" bindtap="__e">发货</view></block><block wx:else><block wx:if="{{order.cancel_status==0&&order.is_send==0&&order.pay_type==2}}"><view data-event-opts="{{[['tap',[['toSend',['$0'],['order']]]]]}}" class="handle-btn other data-v-14ba537a" bindtap="__e">发货</view></block></block><block wx:if="{{order.cancel_status==0&&order.is_send==1&&order.is_confirm==0&&order.express&&status!=2}}"><view class="handle-btn other data-v-14ba537a" open-type="navigate" data-event-opts="{{[['tap',[['toExpress',['$0',2],['order']]]]]}}" bindtap="__e">修改物流信息</view></block><block wx:if="{{order.is_send==0&&order.cancel_status==0}}"><view data-event-opts="{{[['tap',[['toCancelorder',['$0'],['order']]]]]}}" class="handle-btn data-v-14ba537a" bindtap="__e">取消订单</view></block><block wx:if="{{order.status_text=='已发货,待商家处理'&&order.type==1}}"><view data-event-opts="{{[['tap',[['toRefund',['$0'],['order']]]]]}}" class="handle-btn other data-v-14ba537a" catchtap="__e">退款</view></block><block wx:if="{{order.status_text=='已发货,待商家处理'&&order.type==2}}"><view data-event-opts="{{[['tap',[['toSend',['$0'],['order']]]]]}}" class="handle-btn other data-v-14ba537a" bindtap="__e">发货</view></block><block wx:if="{{status==2&&order.status==2&&order.status_text!='已换货'&&order.status_text!='已退款'}}"><view data-event-opts="{{[['tap',[['refundHandle',[2,'$0',1],['order']]]]]}}" class="{{['data-v-14ba537a','handle-btn',''+(order.status_text=='已发货,待商家处理'?'':'other')]}}" catchtap="__e">取消售后</view></block><block wx:if="{{status==2&&order.status==1}}"><view data-event-opts="{{[['tap',[['refundHandle',[1,'$0'],['order']]]]]}}" class="handle-btn other data-v-14ba537a" bindtap="__e">同意</view></block><block wx:if="{{status==2&&order.status==1}}"><view data-event-opts="{{[['tap',[['refundHandle',[2,'$0'],['order']]]]]}}" class="handle-btn data-v-14ba537a" bindtap="__e">拒绝</view></block><block wx:if="{{status==2}}"><view data-event-opts="{{[['tap',[['lookAbout',['$0'],['order']]]]]}}" class="handle-btn data-v-14ba537a" bindtap="__e">售后理由</view></block></view></block><block wx:if="{{chooseTime||isRefund||noRefund||changePrice||cancelOrder||callPhone||isSend||notRefund||isReason||openAddress||noAddress}}"><view class="bg cross-center data-v-14ba537a"><block wx:if="{{isRefund}}"><view class="dialog data-v-14ba537a"><view class="dialog-title data-v-14ba537a">退款</view><block wx:if="{{status==1}}"><view class="main-center refund-pay data-v-14ba537a">{{"￥"+detail.total_pay_price}}</view></block><block wx:if="{{status==2}}"><view class="main-center cross-center refund-pay data-v-14ba537a">￥<input class="refund-price data-v-14ba537a" type="digit" data-event-opts="{{[['input',[['__set_model',['','refund_price','$event',[]]]]]]}}" value="{{refund_price}}" bindinput="__e"/></view></block><view class="main-center refund-tip data-v-14ba537a">是否确认退款给买家</view><view class="main-center btn-area data-v-14ba537a"><view data-event-opts="{{[['tap',[['cancel',['$event']]]]]}}" class="submit-btn data-v-14ba537a" bindtap="__e">取消</view><view class="line data-v-14ba537a"></view><block wx:if="{{status==1}}"><view data-event-opts="{{[['tap',[['cancelSubmit',['$event']]]]]}}" class="submit-btn be-submit data-v-14ba537a" bindtap="__e">确认</view></block><block wx:if="{{status==2}}"><view data-event-opts="{{[['tap',[['agree',['$event']]]]]}}" class="submit-btn be-submit data-v-14ba537a" bindtap="__e">确认</view></block></view></view></block><view class="dialog-bg data-v-14ba537a" style="{{'display:'+(''+(noRefund||notRefund?'block':'none'))+';'}}"></view><block wx:if="{{noRefund||notRefund}}"><view class="dialog data-v-14ba537a"><block wx:if="{{noRefund}}"><view class="dialog-title data-v-14ba537a">拒绝取消</view></block><block wx:if="{{notRefund}}"><view class="dialog-title data-v-14ba537a">拒绝售后</view></block><textarea class="textarea data-v-14ba537a" fixed bindinput="toAbout" placeholder="请输入拒绝理由" placeholder-style="color:#999999;font-size:14px" auto-focus></textarea><view class="main-center btn-area data-v-14ba537a"><view data-event-opts="{{[['tap',[['cancel',['$event']]]]]}}" class="submit-btn data-v-14ba537a" bindtap="__e">取消</view><view class="line data-v-14ba537a"></view><block wx:if="{{noRefund}}"><view data-event-opts="{{[['tap',[['noCancel',['$event']]]]]}}" class="submit-btn be-submit data-v-14ba537a" bindtap="__e">确认</view></block><block wx:if="{{notRefund}}"><view data-event-opts="{{[['tap',[['decline',[0]]]]]}}" class="submit-btn be-submit data-v-14ba537a" bindtap="__e">确认</view></block></view></view></block><block wx:if="{{noAddress}}"><view class="dialog data-v-14ba537a"><view class="main-center cancel-tip data-v-14ba537a">请到商户后台添加退货地址</view><view class="main-center btn-area data-v-14ba537a"><view data-event-opts="{{[['tap',[['cancel',['$event']]]]]}}" class="submit-btn be-submit data-v-14ba537a" bindtap="__e">确认</view></view></view></block><block wx:if="{{changePrice}}"><view class="dialog data-v-14ba537a"><view class="dialog-title data-v-14ba537a">修改价格</view><view class="dir-left-nowrap change-price-item data-v-14ba537a"><view class="label data-v-14ba537a">商品总价</view><view class="money data-v-14ba537a">￥</view><input class="price-input data-v-14ba537a" type="digit" focus data-event-opts="{{[['input',[['__set_model',['','price','$event',[]]],['priceInput',['$event']]]]]}}" value="{{price}}" bindinput="__e"/></view><view class="dir-left-nowrap change-price-item data-v-14ba537a"><view class="label data-v-14ba537a">运费</view><view class="money data-v-14ba537a">￥</view><input class="price-input data-v-14ba537a" type="digit" focus data-event-opts="{{[['input',[['__set_model',['','express','$event',[]]],['expressInput',['$event']]]]]}}" value="{{express}}" bindinput="__e"/></view><view class="dir-left-nowrap change-price-item data-v-14ba537a"><view class="label data-v-14ba537a">合计</view><view class="change-total-price data-v-14ba537a">{{total}}</view></view><view class="main-center btn-area data-v-14ba537a"><view data-event-opts="{{[['tap',[['cancel',['$event']]]]]}}" class="submit-btn data-v-14ba537a" bindtap="__e">取消</view><view class="line data-v-14ba537a"></view><view data-event-opts="{{[['tap',[['submitChange',['$event']]]]]}}" class="submit-btn be-submit data-v-14ba537a" bindtap="__e">确认</view></view></view></block><block wx:if="{{cancelOrder}}"><view class="dialog data-v-14ba537a"><view class="main-center cancel-tip data-v-14ba537a">确定取消该订单?</view><view class="main-center btn-area data-v-14ba537a"><view data-event-opts="{{[['tap',[['cancel',['$event']]]]]}}" class="submit-btn data-v-14ba537a" bindtap="__e">取消</view><view class="line data-v-14ba537a"></view><view data-event-opts="{{[['tap',[['cancelSubmit',['$event']]]]]}}" class="submit-btn be-submit data-v-14ba537a" bindtap="__e">确认</view></view></view></block><block wx:if="{{callPhone}}"><view class="dialog data-v-14ba537a"><view class="main-center cancel-tip data-v-14ba537a">{{mobile}}</view><view class="main-center btn-area data-v-14ba537a"><view data-event-opts="{{[['tap',[['cancel',['$event']]]]]}}" class="submit-btn data-v-14ba537a" bindtap="__e">取消</view><view class="line data-v-14ba537a"></view><view data-event-opts="{{[['tap',[['call',['$event']]]]]}}" class="submit-btn be-submit data-v-14ba537a" bindtap="__e">确认</view></view></view></block><block wx:if="{{isSend}}"><view class="dialog data-v-14ba537a"><view class="dialog-title data-v-14ba537a">选择发货方式</view><view class="flex-wrap main-center send-type data-v-14ba537a"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="{{['data-v-14ba537a',''+(sendType==0?'active':''),'send-item']}}" bindtap="__e">快递配送</view><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="{{['data-v-14ba537a',''+(sendType==1?'active':''),'send-item']}}" bindtap="__e">无需物流</view></view><view class="main-center btn-area data-v-14ba537a"><view data-event-opts="{{[['tap',[['cancel',['$event']]]]]}}" class="submit-btn data-v-14ba537a" bindtap="__e">取消</view><view class="line data-v-14ba537a"></view><view data-event-opts="{{[['tap',[['toSendType',['$event']]]]]}}" class="submit-btn be-submit data-v-14ba537a" bindtap="__e">确认</view></view></view></block><block wx:if="{{isReason}}"><view class="dialog data-v-14ba537a"><view class="dialog-title data-v-14ba537a">售后理由</view><view class="reason data-v-14ba537a"><view class="reason-title data-v-14ba537a">申请原因</view><view class="reason-content data-v-14ba537a">{{order.remark}}</view><block wx:if="{{order.pic_list.length>0}}"><view class="reason-title data-v-14ba537a">图片</view></block><block wx:if="{{order.pic_list.length>0}}"><view class="dir-left-wrap reason-img data-v-14ba537a"><block wx:for="{{order.pic_list}}" wx:for-item="item" wx:for-index="__i3__" wx:key="*this"><image src="{{item}}" data-event-opts="{{[['tap',[['look',['$0'],[[['order.pic_list','',__i3__]]]]]]]}}" bindtap="__e" class="data-v-14ba537a"></image></block></view></block></view><view class="main-center btn-area other-btn-area data-v-14ba537a"><view data-event-opts="{{[['tap',[['cancel',['$event']]]]]}}" class="submit-btn be-submit data-v-14ba537a" bindtap="__e">确认</view></view></view></block><block wx:if="{{openAddress}}"><view class="dialog data-v-14ba537a"><view class="dialog-title data-v-14ba537a">选择退货地址</view><view class="add-list data-v-14ba537a"><block wx:for="{{address}}" wx:for-item="item" wx:for-index="__i4__" wx:key="*this"><view class="add-item data-v-14ba537a"><block wx:if="{{item.id==addressId}}"><image src="./../../image/apply-ok.png" data-event-opts="{{[['tap',[['chooseAddress',['$0'],[[['address','',__i4__,'id']]]]]]]}}" bindtap="__e" class="data-v-14ba537a"></image></block><block wx:else><image src="./../../image/apply-er.png" data-event-opts="{{[['tap',[['chooseAddress',['$0'],[[['address','',__i4__,'id']]]]]]]}}" bindtap="__e" class="data-v-14ba537a"></image></block><view data-event-opts="{{[['tap',[['chooseAddress',['$0'],[[['address','',__i4__,'id']]]]]]]}}" class="add-info data-v-14ba537a" bindtap="__e"><view class="main-between data-v-14ba537a"><view class="add-name data-v-14ba537a">{{item.name}}</view><view class="data-v-14ba537a">{{item.mobile}}</view></view><view class="data-v-14ba537a">{{item.address_detail}}</view></view></view></block></view><view class="main-center btn-area other-btn-area data-v-14ba537a"><view data-event-opts="{{[['tap',[['cancel',['$event']]]]]}}" class="submit-btn data-v-14ba537a" bindtap="__e">取消</view><view class="line data-v-14ba537a"></view><view data-event-opts="{{[['tap',[['decline',[1]]]]]}}" class="submit-btn be-submit data-v-14ba537a" bindtap="__e">确认</view></view></view></block></view></block></app-layout>